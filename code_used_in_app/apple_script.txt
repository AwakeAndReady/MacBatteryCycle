(* MacBatteryCycleThis script automates the process of battery management, optimizing battery health by controlling cyclical charging and discharging based on user-defined thresholds. It begins by checking if a specific Bash script (battery_cycle.sh) is already running, preventing duplicate instances. If not running, it prompts the user to decide whether to enable battery discharging when a certain upper limit is reached. Based on the user's choice, it then allows the selection of upper and lower battery limits. After determining the correct path to the Bash script, it executes this script in the Terminal with the specified parameters. *)tell application "System Events"	try		set scriptRunning to do shell script "ps aux | grep '[b]attery_cycle.sh' | wc -l | tr -d ' '"		if scriptRunning is not "0" then			display dialog "Mac Battery Cycle is already running." buttons {"OK"} default button "OK"			return		end if	on error errMsg number errNum		display dialog "Error checking script status: " & errMsg & " (Error " & errNum & ")" buttons {"OK"} default button "OK"		return	end tryend telltell application "System Events"	try		display dialog "Do you want to allow battery discharging once the Upper limit is reached?" buttons {"Yes", "No", "Cancel"} default button "No" cancel button "Cancel" with title "MacBatteryCycle"		set userChoice to button returned of the result	on error		-- User clicked "Cancel", terminate the script		return	end tryend tellif userChoice is "Yes" or userChoice is "No" then	set upperLimitChoices to {"70", "75", "80", "85", "90", "95", "100"}	set lowerLimitChoices to {"5", "10", "15", "20", "25", "30", "35"}		set upperLimit to choose from list upperLimitChoices with title "Select Upper Battery Limit (%)" default items {"75"}	set lowerLimit to choose from list lowerLimitChoices with title "Select Lower Battery Limit (%)" default items {"25"}		if upperLimit is false or lowerLimit is false then		-- User cancelled one of the dropdown selections		return	end if		set upperLimitValue to item 1 of upperLimit	set lowerLimitValue to item 1 of lowerLimit	end iftell application "Finder"	set current_path to (POSIX path of (container of (path to me) as alias)) & "MacBatteryCycle.app/Contents"end telldisplay dialog "Check for logs in " & current_path buttons {"OK"}tell application "Terminal"	if userChoice is "Yes" then		do script "cd " & quoted form of current_path & " && bash battery_cycle.sh --discharge --upper " & upperLimitValue & " --lower " & lowerLimitValue	else if userChoice is "No" then		do script "cd " & quoted form of current_path & " && bash battery_cycle.sh --upper " & upperLimitValue & " --lower " & lowerLimitValue	end ifend tell